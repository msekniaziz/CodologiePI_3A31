{% extends 'HomeOn.html.twig' %}

{% block title %}ProdR index{% endblock %}

{% block body %}
    {% for message in app.flashes('success') %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endfor %}
<style>
.dashboard-container {
  margin-left: auto;
  margin-right: auto;
}
 .page-search {
    background-color: black; /* Couleur de fond */
}

.page-search .advance-search .form-control {
    background-color: 058C4B; /* Couleur de fond des champs de saisie */
    color: white; /* Couleur du texte */
    border-color: #058C4B; /* Couleur de la bordure */
            width: 1000px; /* Largeur à 100% */
}

.page-search .advance-search select.form-control {
    background-color: 058C4B; /* Couleur de fond du menu déroulant */
    color: white; /* Couleur du texte du menu déroulant */
    border-color: darkgreen; /* Couleur de la bordure du menu déroulant */
    margin-right: 0; /* Déplacer le bloc à droite en utilisant la marge automatique à gauche */


}
 button.btn-primary {
    background-color: darkgreen; /* Couleur de fond du bouton de recherche */
    border-color: darkgreen; /* Couleur de la bordure du bouton de recherche */
    color: white; /* Couleur du texte du bouton de recherche */
}
 button.btn-primary:hover {
    background-color: green; /* Couleur de fond du bouton de recherche au survol */
    border-color: green; /* Couleur de la bordure du bouton de recherche au survol */
}

</style>
                                                {# <ul class="list-inline justify-content-center"> #}

       <section class="page-search">
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-md-12">
				<!-- Advance Search -->
				<div class="advance-search nice-select-white">
					<form>
						<div class="form-row align-items-center">
							<div class="form-group col-xl-4 col-lg-3 col-md-6"  >
								<input type="search" class="form-control my-2 my-lg-0" id="search" placeholder="What are you looking for">
							</div>
							<div class="form-group col-lg-8 col-md-6">
								<select class="w-50 form-control my-3 my-lg-9 float-right"  id="typeFilter">
                                            <option value="">all</option>
  {% for typeDispo in typeDispos %}
                                            <option value="{{ typeDispo.getNom() }}">{{typeDispo.getNom()}}</option>
                                        {% endfor %}							
									
								</select>
							</div>
						
						
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</section>
    <section class="dashboard section">
        <div class="container">
        <div class="row"> <!-- Utiliser la classe justify-content-center pour aligner au centre -->

               <div class="col-lg-12">
{# <div class="sidebar"> #}
                
                {# <div class="col-lg-12"> #}
                    <div class="search-container">
                                            {# <input id="search" class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search"> #}
                    </div>
                    <div class="widget dashboard-container my-adslist">
                        <table class="table table-responsive product-dashboard-table" id="tableac">
                            <thead>
                                <tr>
                                    <th>Product Title</th>
                                    <th class="text-center">Category</th>
                                    <th class="text-center">Action</th>
                                    <th class="text-center">Delete?</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for prod_r in prod_rs %}
                                    {# <tr class="searchable-row" data-category="{{ prod_r.getTypeProdId() }}"> #}
                                    <tr  data-category="{{ prod_r.getTypeProdId() }}">
                                    <td class="product-details">
{{ prod_r.nomP }}  
                                         <span class="add-id"><strong>Product ID:</strong> {{ prod_r.id }}</span>
                                        {% if prod_r.statut %}
                                            <span class="status active"><strong>Status</strong>Checked</span>
                                        {% else %}
                                            <span class="status inactive" style="color: red;"><strong>Status</strong>Not checked</span>
                                        {% endif %}
                                        <span class="location"><strong>Location</strong>{{ prod_r.getPtcId() }}</span>
                                    </td>
                                        <td>{{prod_r.getTypeProdId()}}</td>
                                        <td class="action" data-title="Action">
                                            <div>
                                                <ul class="list-inline justify-content-center">
                                                    <li class="list-inline-item">
                                                        <a data-toggle="tooltip" data-placement="top" title="view" class="view" href="{{ path('app_prod_r_show', {'id': prod_r.id}) }}">
                                                            <i class="fa fa-eye"></i>
                                                        </a>
                                                    </li>
                                                    <li class="list-inline-item">
                                                        <a class="edit" data-toggle="tooltip" data-placement="top" title="Edit" href="{{ path('app_prod_r_edit', {'id': prod_r.id}) }}">
                                                            <i class="fa fa-edit"></i>
                                                        </a>
                                                    </li>
                                                    <li>
                                                    </td>
                                                    <td>
                                                        <form method="post" action="{{ path('app_prod_r_delete', {'id': prod_r.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
                                                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ prod_r.id) }}">
                                                            <button class="btn" style="color: red;"><i class="fa fa-trash"></i> Delete</button>
                                                        </form>
                                                    </li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                {% else %}
                                    <tr>
                                        <td colspan="3">no records found</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <nav aria-label="Page navigation example">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">Previous</a>
                            </li>
                            <li class="page-item"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">Next</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(document).ready(function() {
            // Fonction pour filtrer le tableau en fonction de la valeur de recherche
            function search_table(value){
                $('#tableac tbody tr').each(function(){
                    var found = false;
                    $(this).find('td:first-child').each(function(){ // Modifier le sélecteur si nécessaire
                        if($(this).text().toLowerCase().includes(value.toLowerCase())){
                            found = true;
                            return false;
                        }
                    });
                    if(found){
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            }

            // Effectue la recherche lorsqu'une touche est relâchée dans le champ de recherche
            $('#search').keyup(function(){
                search_table($(this).val());
            });
       
     $('#typeFilter').change(function() {
    var selectedCategory = $(this).val();

    // Si l'option "all" est sélectionnée, afficher toutes les lignes
    if (selectedCategory === '') {
        $('#tableac tbody tr').show();
    } else {
        $('#tableac tbody tr').hide();
        // Afficher uniquement les lignes correspondant à la catégorie sélectionnée
        var filteredRows = $('#tableac tbody tr[data-category="' + selectedCategory + '"]');
        filteredRows.show();
    }
});
      
            });
      
                

    </script>
{% endblock %}
